<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TaiwanPetroUWP"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:fa="using:FontAwesome.UWP"
    xmlns:Maps="using:Windows.UI.Xaml.Controls.Maps"
    xmlns:ViewModels="using:TaiwanPetroLibrary.ViewModels"
    xmlns:Helpers="using:TaiwanPetroUWP.Helpers"
    xmlns:Converters="using:Cimbalino.Toolkit.Converters"
    x:Class="TaiwanPetroUWP.LocationPage"
    mc:Ignorable="d"
    x:Name="pageRoot" Loaded="pageRoot_Loaded">
    <Page.Resources>
        <Converters:StringFormatConverter x:Key="StringFormatConverter"/>
        <Helpers:brandvisconvert x:Key="brandvisconvert"/>
        <Helpers:boolvisConverter x:Key="boolvisConverter"/>
        <Helpers:geoPointConverter x:Key="geoPointConverter"/>
        <Helpers:infopointVisConverter x:Key="infopointVisConverter"/>
        <Helpers:favoritetextConverter x:Key="favoritetextConverter"/>
        <Helpers:favoriteiconConverter x:Key="favoriteiconConverter"/>
        <Helpers:bulletincolorConverter x:Key="bulletincolorConverter"/>
        <Helpers:priceConverter x:Key="priceConverter"/>
        <Helpers:distancefontsizeConverter x:Key="distancefontsizeConverter"/>
        <Helpers:stationopencolorConverter x:Key="stationopencolorConverter"/>
        <Helpers:durationConverter x:Key="durationConverter"/>
        <Helpers:puredateConverter x:Key="puredateConverter"/>
        <Helpers:selfvisConverter x:Key="selfvisConverter"/>
        <Helpers:selftypeConverter x:Key="selftypeConverter"/>
        <Helpers:foundcountCounter x:Key="foundcountCounter"/>
        <Helpers:DBcountConverter x:Key="DBcountConverter"/>
        <Helpers:countvisConverter x:Key="countvisConverter"/>
    </Page.Resources>
    <Page.DataContext>
        <ViewModels:infoViewModel/>
    </Page.DataContext>
    <Grid x:Name="gridRoot" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.DataContext>
            <ViewModels:stationViewModel/>
        </Grid.DataContext>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.Resources>
            <CollectionViewSource x:Name="stationcollectview" Source="{Binding queryStations}" IsSourceGrouped="true"/>
            <!--<DataTemplate x:Key="currentPin">
                <StackPanel Orientation="Horizontal">
                    <fa:FontAwesome Icon="MapMarker" Foreground="Maroon"></fa:FontAwesome>
                    <TextBlock Text="目前位置" Foreground="Maroon"></TextBlock>
                </StackPanel>
            </DataTemplate>
            <DataTemplate x:Key="queryPin">
                <StackPanel Maps:MapControl.Location="{Binding sfilterlocation, Mode=TwoWay, UpdateSourceTrigger=Explicit, Converter={StaticResource geoPointConverter}}" Maps:MapControl.NormalizedAnchorPoint="0.5,0.5" Orientation="Horizontal">
                    <fa:FontAwesome Icon="ThumbTack" Foreground="Maroon"></fa:FontAwesome>
                    <TextBlock Text="查詢位置" Foreground="Maroon"></TextBlock>
                </StackPanel>
            </DataTemplate> -->
            <DataTemplate x:Key="stationHeader">
                <TextBlock Text="{Binding header}" FontSize="25" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,0,10,0"/>
            </DataTemplate>
            <DataTemplate x:Key="stationoutHeader">
                <TextBlock Text="{Binding Group.header}" FontSize="25" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,0,10,0"/>
            </DataTemplate>
            <DataTemplate x:Key="stationItem">
                <Grid Margin="0,2" Height="80" Tapped="station_Tapped" DoubleTapped="station_DoubleTapped">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.ContextFlyout>
                        <MenuFlyout>
                            <MenuFlyoutItem Text="導航到該站" Click="navistation_Click">
                                <MenuFlyoutItem.Icon>
                                    <fa:FontAwesome Icon="LocationArrow"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem Text="{Binding favorite, Converter={StaticResource favoritetextConverter}}" Click="savestation_Click">
                                <MenuFlyoutItem.Icon>
                                    <fa:FontAwesome Icon="{Binding favorite, Converter={StaticResource favoriteiconConverter}}"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem Text="查詢該站其他鄰近加油站" Click="querynearstation_Click">
                                <MenuFlyoutItem.Icon>
                                    <fa:FontAwesome Icon="Compass"/>
                                </MenuFlyoutItem.Icon>
                            </MenuFlyoutItem>
                        </MenuFlyout>
                    </Grid.ContextFlyout>
                    <Border Background="{Binding brand, Converter={StaticResource bulletincolorConverter}}">
                        <Grid>
                            <Grid.Clip>
                                <RectangleGeometry Rect="0, 0, 80, 80"/>
                            </Grid.Clip>
                            <Grid Margin="-20,-20,0,0">
                                <Canvas Opacity="0.2" Visibility="{Binding brand, ConverterParameter=0, Converter={StaticResource brandvisconvert}}">
                                    <Path Data="F1M70,35.012C70,15.687 54.329,0 35.008,0 15.67,0 0,15.687 0,35.012 0,52.439 12.733,66.891 29.405,69.568L29.405,67.7C13.769,65.043 1.85,51.419 1.85,35.012 1.85,16.69 16.689,1.85 35.008,1.85 53.312,1.85 68.166,16.69 68.166,35.012 68.166,51.674 55.874,65.463 39.864,67.816L39.864,69.678C56.894,67.31,70,52.692,70,35.012" Fill="White" Height="69.678" Canvas.Left="0" Canvas.Top="0" Width="70"/>
                                    <Path Data="F1M62.088,31.042C62.088,13.904 48.2,0 31.052,0 13.904,0 0,13.904 0,31.042 0,46.29 11.002,58.969 25.484,61.589L25.484,59.435C12.172,56.841 2.122,45.116 2.122,31.042 2.122,15.059 15.076,2.122 31.052,2.122 47.029,2.122 59.983,15.059 59.983,31.042 59.983,45.336 49.609,57.205 35.992,59.548L35.992,61.694C50.781,59.329,62.088,46.507,62.088,31.042" Fill="White" Height="61.694" Canvas.Left="3.837" Canvas.Top="3.939" Width="62.088"/>
                                    <Path Data="F1M53.617,26.814C53.617,12.002 41.614,0 26.809,0 12.004,0 0,12.002 0,26.814 0,39.715 9.101,50.486 21.24,53.046L21.24,50.88C10.289,48.359 2.106,38.541 2.106,26.814 2.106,13.173 13.176,2.122 26.809,2.122 40.441,2.122 51.495,13.173 51.495,26.814 51.495,38.761 43.022,48.728 31.749,51.014L31.749,53.17C44.194,50.852,53.617,39.935,53.617,26.814" Fill="White" Height="53.17" Canvas.Left="8.08" Canvas.Top="8.167" Width="53.617"/>
                                    <Path Data="F1M18.473,4.853C18.473,4.853,15.178,3.09,10.629,2.946L10.629,1.915C13.022,1.978 15.74,2.465 18.66,3.734 18.998,3.877 18.473,4.853 18.473,4.853 M1.614,5.104L1.172,4.045C1.172,4.045,4.432,2.072,9.458,1.915L9.458,2.947C7.029,3.026,4.33,3.594,1.614,5.104 M10.629,1.028L10.629,0 9.458,0 9.458,1.053C3.905,1.325 0,3.796 0,3.796 0,3.796 1.206,6.339 1.614,6.162 5.043,4.667 7.318,3.913 9.458,3.764L9.458,5.477 10.629,5.477 10.629,3.742C12.886,3.818 15.196,4.552 18.778,5.788 19.152,5.912 19.779,3.422 19.779,3.422 16.554,1.678 13.43,1.055 10.629,1.028" Fill="White" Height="6.171" Canvas.Left="24.566" Canvas.Top="36.412" Width="19.779"/>
                                    <Path Data="F1M12.694,0C12.694,0 9.196,3.617 9.569,6.842 9.689,7.827 9.706,10.323 8.585,11.324 8.178,11.681 6.123,8.099 3.237,8.456 3.237,9.083 6.717,10.696 2.983,14.437 2.252,15.038 -4.369,24.268 4.85,25.263 5.394,25.325 -1.007,22.401 5.342,16.428 5.716,16.077 5.597,23.036 11.692,23.036 13.186,23.036 17.159,21.032 16.632,16.801 17.295,16.304 24.391,21.406 18.042,25.016 18.042,25.016 20.147,25.512 22.151,23.771 24.408,21.785 25.902,18.077 20.028,13.073 20.028,13.073 21.03,10.832 20.147,9.202 19.808,8.574 19.909,6.469 20.147,5.857 20.402,5.229 18.907,7.215 19.027,8.456 19.162,9.712 17.295,11.205 16.632,10.951 16.141,10.764 18.042,9.712 13.56,5.111 12.779,4.295 11.624,2.105 12.694,0" Fill="White" Height="25.264" Canvas.Left="23.197" Canvas.Top="12.58" Width="24.144"/>
                                    <Path Data="F1M0.531,0C0.531,0 0.718,3.67 3.401,5.289 3.57,5.39 -1.642,4.417 0.531,0" Fill="White" Height="5.296" Canvas.Left="27.567" Canvas.Top="31.311" Width="3.405"/>
                                    <Path Data="F1M3.26,0C3.581,0.218 4.771,4.698 0.017,5.289 -0.254,5.324 2.767,4.264 3.26,0" Fill="White" Height="5.29" Canvas.Left="37.962" Canvas.Top="31.403" Width="3.629"/>
                                    <Path Data="F1M1.901,0C1.901,0 2.444,4.194 2.614,4.606 2.869,5.187 0.797,3.485 0,0.622 0.255,0.333 1.901,0 1.901,0" Fill="White" Height="4.719" Canvas.Left="27.419" Canvas.Top="42.448" Width="2.636"/>
                                    <Path Data="F1M0,0.209L1.698,0 1.782,5.601C1.782,5.601 2.7,6.015 4.108,6.087 4.228,6.095 4.022,17.796 4.022,17.796L3.328,17.754 3.022,6.886C3.022,6.886 0.917,6.596 0.374,5.975 0.187,5.764 0,0.209 0,0.209" Fill="White" Height="17.796" Canvas.Left="30.781" Canvas.Top="41.868" Width="4.146"/>
                                    <Path Data="F1M3.819,3.64C3.413,3.435,2.97,3.279,2.564,3.156L2.648,1.915C3.141,2.025 3.683,2.183 4.295,2.412 4.295,2.412 4.311,2.928 3.819,3.64 M2.411,4.955L2.512,3.781C2.885,3.906 3.21,4.041 3.413,4.133 3.158,4.398 2.836,4.675 2.411,4.955 M0.747,3.464C1.103,3.467 1.46,3.514 1.782,3.583 1.731,4.265 1.647,4.96 1.51,5.488 1.306,5.593 1.086,5.699 0.848,5.803 0.781,5.831 0.747,4.594 0.747,3.464 M0.747,1.667C0.747,1.667 1.172,1.659 1.867,1.765 1.867,2.087 1.85,2.51 1.816,2.967 1.375,2.869 0.984,2.813 0.747,2.784z M2.732,1.223L2.75,0.12C2.75,0.12 2.019,0 1.935,0 1.952,0.172 1.92,0.608 1.902,0.951 1.392,0.904 0.136,0.763 0,0.763 0.085,1.344 0.016,6.757 0.016,6.757 0.016,6.757 4.5,5.761 5.569,2.029 5.619,1.862 2.732,1.223 2.732,1.223" Fill="White" Height="6.757" Canvas.Left="35.789" Canvas.Top="41.747" Width="5.57"/>
                                    <Path Data="F1M0,0L0.968,0 0.968,4.23 0,4.23z" Fill="White" Height="4.23" Canvas.Left="33.548" Canvas.Top="42.574" Width="0.968"/>
                                    <Path Data="F1M3.714,3.614L8.001,3.614C7.11,3.278 6.202,3.001 5.278,2.783 4.876,3.112 4.354,3.39 3.714,3.614 M7.298,6.565L2.08,6.565 2.08,7.15 7.298,7.15z M2.08,5.942L7.298,5.942 7.298,5.427 2.08,5.427z M2.08,4.783L7.298,4.783 7.298,4.288 2.08,4.288z M0.872,0.228C1.458,0.445,2,0.706,2.494,1.01L1.942,1.851C1.438,1.474,0.924,1.172,0.395,0.94z M4.396,0L5.218,0.316C5.106,0.488,5.004,0.647,4.912,0.792L8.872,0.792 8.872,1.456C8.516,1.851,8.088,2.199,7.586,2.495L6.962,1.93C7.174,1.831,7.41,1.686,7.674,1.495L6.338,1.495C6.172,1.76 6.022,1.99 5.882,2.188 7.018,2.459 8.063,2.763 9.022,3.099L8.546,3.843C8.442,3.797,8.328,3.754,8.21,3.714L8.21,7.813 6.16,7.813C7.13,7.992,8.14,8.249,9.19,8.587L8.854,9.418C7.83,9.035,6.764,8.74,5.654,8.537L6.022,7.813 3.358,7.813 3.872,8.427C2.802,8.856,1.736,9.173,0.672,9.378L0.276,8.547C1.426,8.394,2.43,8.148,3.288,7.813L1.168,7.813 1.168,3.614 3.06,3.614 2.644,3.069C3.528,2.852 4.212,2.555 4.694,2.178 4.924,1.993 5.132,1.766 5.318,1.495L4.268,1.495C3.99,1.76,3.574,2.05,3.02,2.365L2.326,1.753C2.868,1.482 3.3,1.215 3.624,0.95 3.934,0.687 4.192,0.369 4.396,0 M2.208,2.02L2.456,2.862C1.902,3.173,1.208,3.445,0.376,3.683L0,2.794C0.726,2.634,1.462,2.376,2.208,2.02" Fill="White" Height="9.418" Canvas.Left="29.921" Canvas.Top="60.541" Width="9.19"/>
                                </Canvas>
                                <Canvas Opacity="0.2" Visibility="{Binding brand, ConverterParameter=1, Converter={StaticResource brandvisconvert}}">
                                    <Path Data="M0.801,27.604C1.322,27.833 1.729,27.641 2.151,27.517 5.069,26.66 8.076,26.028 10.883,24.896 13.454,23.858 15.103,24.338 16.817,26.483 18.254,28.283 20.216,29.665 21.816,31.115 22.259,28.452 22.8,25.421 23.245,22.377 23.382,21.443 23.726,20.996 24.669,20.728 27.947,19.794 31.192,18.743 34.699,17.659 31.669,16.231 28.917,14.861 26.097,13.644 25.035,13.186 24.859,12.608 25.037,11.58 25.414,9.415 25.685,7.231 26.05,4.703 24.016,6.573 22.218,8.183 20.477,9.853 19.912,10.393 19.464,10.456 18.754,10.122 14.44,8.094 10.102,6.116 5.767,4.133 5.467,3.996 5.185,3.668 4.676,3.954 7.848,7.691 10.991,11.396 14.364,15.371L6.274,15.371C7.323,16.493 8.167,17.451 9.073,18.344 9.735,18.997 9.902,19.396 9.04,20.139 6.246,22.549 3.561,25.086 0.801,27.604 M34.896,34.885C23.579,34.885 12.262,34.876 0.946,34.905 0.174,34.907 -0.002,34.731 0,33.959 0.029,22.643 0.02,11.326 0.02,0.009 11.649,0.013 23.278,0.017 34.907,0.021L34.904,0C34.938,0.366 35.003,0.732 35.003,1.099 35.009,12.038 35.009,22.978 35.003,33.916 35.003,34.24 34.933,34.562 34.896,34.885" Fill="#FFE6E6E6" Height="34.905" Canvas.Left="0" Canvas.Top="34.887" Width="35.008"/>
                                    <Path Data="M18.486,31.008C19.306,30.948 20.137,30.956 20.944,30.82 26.949,29.802 30.755,26.157 32.963,20.649 33.145,20.194 33.652,19.549 33.067,19.215 32.461,18.868 32.11,19.62 31.719,20.006 31.632,20.091 31.575,20.206 31.493,20.298 29.398,22.652 27.028,24.59 23.802,25.107 21.193,25.525 18.618,25.365 16.212,24.16 10.335,21.218 11.494,13.51 15.148,10.734 17.258,9.131 20.836,9.035 22.912,10.588 24.288,11.618 24.873,13.566 24.27,15.109 23.544,16.966 22.176,17.792 20.206,17.59 19.522,17.519 18.961,17.193 18.41,16.825 18.135,16.642 17.82,16.376 17.52,16.624 17.186,16.902 17.333,17.303 17.502,17.646 17.795,18.242 18.154,18.775 18.715,19.172 20.415,20.376 22.319,20.603 24.255,20.124 27.163,19.406 28.777,17.322 29.336,14.5 29.936,11.471 29.218,8.738 26.735,6.72 23.775,4.314 20.314,3.82 16.617,4.196 10.139,4.857 4.892,10.465 4.745,16.973 4.56,25.154 10.263,30.962 18.486,31.008 M34.907,34.908C23.278,34.904 11.649,34.9 0.02,34.896 0.02,23.579 0.028,12.262 0,0.946 -0.002,0.174 0.174,-0.002 0.945,0 12.262,0.029 23.579,0.02 34.896,0.02 34.934,0.341 35.007,0.664 35.007,0.987 35.012,11.97 35.012,22.954 35.007,33.938 35.007,34.261 34.942,34.585 34.907,34.908" Fill="White" Height="34.908" Canvas.Left="0" Canvas.Top="0" Width="35.011"/>
                                    <Path Data="M17.607,28.755C23.959,28.781 29.1,23.66 29.065,17.342 29.032,11.145 24.004,6.035 17.904,5.996 11.436,5.954 6.329,10.9 6.304,17.229 6.28,23.675 11.236,28.729 17.607,28.755 M0.011,34.909C0.045,34.585 0.111,34.262 0.111,33.938 0.116,22.954 0.116,11.97 0.11,0.987 0.11,0.664 0.038,0.342 0,0.02 11.399,0.02 22.798,0.029 34.197,0 34.968,-0.002 35.145,0.173 35.143,0.945 35.114,12.262 35.124,23.579 35.124,34.896 27.663,34.908 20.203,34.929 12.743,34.93 8.498,34.931 4.253,34.902 0.008,34.887z" Fill="#FFE6E6E6" Height="34.93" Canvas.Left="34.896" Canvas.Top="0" Width="35.143"/>
                                    <Path Data="M13.738,12.176C13.298,9.632 12.99,7.267 12.399,4.957 12.267,4.441 12.182,3.864 11.532,3.733 10.893,3.604 10.577,4.11 10.211,4.489 10.068,4.636 9.935,4.797 9.82,4.966 6.762,9.474 4.926,14.351 5.159,19.899 5.471,27.327 13.129,32.363 20.02,29.594 24.16,27.93 26.842,24.673 29.091,20.995 30.169,19.232 30.998,17.35 31.553,15.354 31.698,14.833 31.859,14.266 31.429,13.833 30.979,13.381 30.436,13.613 29.93,13.816 29.625,13.938 29.315,14.048 29.009,14.173 27.075,14.963 25.141,15.756 23.241,16.535 22.976,16.246 23.055,15.991 23.077,15.758 23.338,13.012 23.553,10.263 23.511,7.503 23.501,6.842 23.856,5.967 23.08,5.581 22.263,5.176 21.725,5.976 21.167,6.403 18.721,8.27 16.304,10.176 13.738,12.176 M0.008,0C4.253,0.016 8.498,0.045 12.743,0.044 20.203,0.042 27.663,0.022 35.124,0.009 35.124,11.326 35.114,22.643 35.143,33.96 35.145,34.732 34.968,34.907 34.197,34.906 22.798,34.877 11.399,34.886 0,34.886 0.037,34.563 0.107,34.24 0.107,33.917 0.113,22.978 0.113,12.039 0.107,1.099 0.107,0.733 0.042,0.366 0.008,0" Fill="White" Height="34.906" Canvas.Left="34.896" Canvas.Top="34.886" Width="35.143"/>
                                    <Path Data="M0,23.763C2.76,21.245 5.445,18.708 8.239,16.298 9.101,15.555 8.934,15.156 8.272,14.503 7.366,13.61 6.522,12.652 5.473,11.53L13.563,11.53C10.19,7.555 7.047,3.85 3.875,0.113 4.384,-0.173 4.666,0.155 4.966,0.292 9.301,2.275 13.639,4.253 17.953,6.281 18.663,6.615 19.111,6.552 19.676,6.012 21.417,4.342 23.215,2.732 25.249,0.862 24.884,3.39 24.613,5.574 24.236,7.739 24.058,8.767 24.234,9.345 25.296,9.803 28.116,11.02 30.868,12.39 33.898,13.818 30.391,14.902 27.146,15.953 23.868,16.887 22.925,17.155 22.581,17.602 22.444,18.536 21.999,21.58 21.458,24.611 21.015,27.274 19.415,25.824 17.453,24.442 16.016,22.642 14.302,20.497 12.653,20.017 10.082,21.055 7.275,22.187 4.268,22.819 1.35,23.676 0.928,23.8 0.521,23.992 0,23.763" Fill="#FFCCCCCC" Height="27.275" Canvas.Left="0.801" Canvas.Top="38.728" Width="33.898"/>
                                    <Path Data="M13.745,26.925C5.522,26.879 -0.181,21.071 0.004,12.89 0.151,6.382 5.398,0.774 11.876,0.113 15.573,-0.263 19.034,0.231 21.994,2.637 24.477,4.655 25.195,7.388 24.595,10.417 24.036,13.239 22.422,15.323 19.514,16.041 17.578,16.52 15.674,16.293 13.974,15.089 13.413,14.692 13.054,14.159 12.761,13.563 12.592,13.22 12.445,12.819 12.779,12.541 13.079,12.293 13.394,12.559 13.669,12.742 14.22,13.11 14.781,13.436 15.465,13.507 17.435,13.709 18.803,12.883 19.529,11.026 20.132,9.483 19.547,7.535 18.171,6.505 16.095,4.952 12.517,5.048 10.407,6.651 6.753,9.427 5.594,17.135 11.471,20.077 13.877,21.282 16.452,21.442 19.061,21.024 22.287,20.507 24.657,18.569 26.752,16.215 26.834,16.123 26.891,16.008 26.978,15.923 27.369,15.537 27.72,14.785 28.326,15.132 28.911,15.466 28.404,16.111 28.222,16.566 26.014,22.074 22.208,25.719 16.203,26.737 15.396,26.873 14.565,26.865 13.745,26.925" Fill="#FFCCCCCC" Height="26.925" Canvas.Left="4.741" Canvas.Top="4.083" Width="28.6"/>
                                    <Path Data="M20.199,11.466C20.21,6.43 16.293,2.453 11.348,2.476 6.434,2.5 2.504,6.442 2.492,11.359 2.48,16.309 6.378,20.236 11.307,20.241 16.3,20.247 20.189,16.408 20.199,11.466 M11.303,22.759C4.931,22.733 -0.025,17.679 0,11.234 0.024,4.904 5.131,-0.042 11.599,0 17.7,0.04 22.727,5.15 22.761,11.346 22.795,17.664 17.654,22.785 11.303,22.759" Fill="#FFCCCCCC" Height="22.759" Canvas.Left="41.201" Canvas.Top="5.995" Width="22.761"/>
                                    <Path Data="M8.599,8.463C11.165,6.463 13.582,4.557 16.028,2.69 16.586,2.263 17.124,1.463 17.941,1.868 18.717,2.254 18.362,3.129 18.372,3.79 18.414,6.55 18.199,9.299 17.938,12.045 17.916,12.278 17.837,12.533 18.102,12.822 20.002,12.043 21.936,11.25 23.87,10.46 24.176,10.335 24.486,10.225 24.791,10.103 25.297,9.9 25.84,9.668 26.29,10.12 26.72,10.553 26.559,11.12 26.414,11.641 25.859,13.637 25.03,15.519 23.952,17.282 21.703,20.96 19.021,24.217 14.881,25.881 7.99,28.65 0.332,23.614 0.02,16.186 -0.213,10.638 1.623,5.761 4.681,1.253 4.796,1.084 4.929,0.923 5.072,0.776 5.438,0.397 5.754,-0.109 6.393,0.02 7.043,0.151 7.128,0.728 7.26,1.244 7.851,3.554 8.159,5.919 8.599,8.463" Fill="#FFCCCCCC" Height="26.652" Canvas.Left="40.035" Canvas.Top="38.599" Width="26.568"/>
                                    <Path Data="M17.707,8.99C17.697,13.932 13.808,17.771 8.815,17.765 3.886,17.76 -0.012,13.833 0,8.883 0.012,3.966 3.942,0.024 8.856,0 13.801,-0.023 17.718,3.954 17.707,8.99" Fill="#FFE6E6E6" Height="17.765" Canvas.Left="43.693" Canvas.Top="8.471" Width="17.707"/>
                                </Canvas>
                            </Grid>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Left">
                                <StackPanel Margin="1">
                                    <TextBlock Margin="0,-5,0,0" Text="{Binding distance, Converter={StaticResource priceConverter}}" FontSize="{Binding distance, Converter={StaticResource distancefontsizeConverter}}" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="km" Margin="0,-10,0,0" HorizontalAlignment="Right" Foreground="White"/>
                                </StackPanel>
                                <Border Margin="0,-2,0,0" Background="{Binding open, Converter={StaticResource stationopencolorConverter}}" Padding="1">
                                    <StackPanel Height="16" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock Text="24小時" Foreground="White" Visibility="{Binding duration, ConverterParameter=1, Converter={StaticResource durationConverter}}" FontSize="14"/>
                                        <TextBlock Text="流動站" Foreground="White" Visibility="{Binding duration, ConverterParameter=3, Converter={StaticResource durationConverter}}" FontSize="14"/>
                                        <TextBlock Text="整修或停業" Foreground="White" Visibility="{Binding duration, ConverterParameter=0, Converter={StaticResource durationConverter}}" FontSize="14"/>
                                        <StackPanel Orientation="Horizontal" Visibility="{Binding duration, ConverterParameter=2, Converter={StaticResource durationConverter}}">
                                            <TextBlock Text="{Binding starttime, Converter={StaticResource puredateConverter}}" Foreground="White" FontSize="14"/>
                                            <TextBlock Text="-" Foreground="White" FontSize="14"/>
                                            <TextBlock Text="{Binding endtime, ConverterParameter='{}{0:HH:mm}', Converter={StaticResource StringFormatConverter}}" Foreground="White" FontSize="14"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>
                    <Border Grid.Column="1">
                        <Grid>
                            <StackPanel Margin="8,0,0,0">
                                <TextBlock Text="{Binding name}" Foreground="Black" FontSize="20" FontWeight="Bold" FontFamily="Segoe WP"/>
                                <TextBlock Text="{Binding address}" Foreground="Black"/>
                                <TextBlock Text="{Binding phone}" Foreground="Black"/>
                            </StackPanel>
                            <Grid Height="30.914" Width="74.053" Margin="241,46,10,0" Visibility="{Binding selftype, Converter={StaticResource selfvisConverter}}">
                                <Path Data="M22.219,1.995C20.699,1.651 18.931,2.014 17.497,1.891 14.958,1.674 12.506,1.872 10.138,2.817 5.648,4.611 3.862,9.035 6.164,13.317 5.064,13.128 4.059,12.962 3.058,12.779 2.073,12.598 1.089,12.396 0.138,12.211 -0.651,7.413 2.029,2.745 6.46,1.131 11.826,-0.824 17.292,-0.055 22.219,1.995" Fill="#FF28A36D" Margin="4.452,0,47.383,17.597"/>
                                <Path Data="M21.852,2.864C20.332,2.521 18.929,2.197 17.523,1.887 14.962,1.325 12.534,1.868 10.165,2.814 5.675,4.608 3.888,9.031 6.189,13.315 5.09,13.125 1.085,12.195 0.137,12.01 -0.654,7.211 2.054,2.742 6.485,1.129 11.853,-0.827 16.948,-0.236 21.852,2.864" Fill="#FFF6B152" Margin="8.484,0.967,43.717,16.632"/>
                                <Path Data="M0,11.322C1.518,11.665 3.286,11.304 4.72,11.426 7.26,11.643 9.71,11.447 12.08,10.5 16.57,8.705 18.354,4.282 16.054,0 17.154,0.191 18.158,0.354 19.158,0.539 20.146,0.719 21.13,0.922 22.078,1.107 22.87,5.904 20.188,10.573 15.758,12.186 10.39,14.141 4.926,13.374 0,11.322" Fill="#FF28A36D" Margin="10.134,17.126,41.702,0.471"/>
                                <Path Data="M0,10.45C1.518,10.796 2.922,11.119 4.326,11.428 6.888,11.99 9.318,11.448 11.686,10.5 16.176,8.707 17.964,4.284 15.662,0 16.76,0.191 20.766,1.121 21.714,1.306 22.504,6.104 19.796,10.574 15.364,12.188 9.998,14.142 4.902,13.551 0,10.45" Fill="#FFF6B152" Margin="6.469,16.161,45.733,1.438"/>
                                <Path Data="F1M0.882,7.211L6.236,7.211 6.236,5.847 0.882,5.847z M0.882,4.994L6.236,4.994 6.236,3.723 0.882,3.723z M0.882,2.868L6.236,2.868 6.236,1.792 0.882,1.792z M2.738,0L3.703,0.131C3.635,0.42,3.526,0.69,3.379,0.939L7.127,0.939 7.127,8.576 6.236,8.576 6.236,8.064 0.882,8.064 0.882,8.576 0,8.576 0,0.939 2.413,0.939C2.549,0.635,2.658,0.323,2.738,0" Fill="#FF3F75B5" Margin="17.91,5.547,49.016,16.791"/>
                                <Path Data="F1M7.108,8.622C6.886,8.622,6.636,8.608,6.356,8.585L6.198,7.609C6.496,7.667 6.803,7.693 7.117,7.693 7.384,7.693 7.532,7.508 7.563,7.137 7.613,6.68 7.643,5.188 7.656,2.663L6.579,2.663C6.536,3.901 6.387,4.937 6.135,5.773 5.843,6.72 5.289,7.691 4.472,8.687L3.74,8.047C4.488,7.255 5.017,6.408 5.327,5.504 5.562,4.853 5.691,3.908 5.716,2.663L4.306,2.663 4.306,1.81 5.726,1.81 5.726,0 6.589,0 6.589,1.81 8.51,1.81C8.51,4.983 8.472,6.865 8.399,7.454 8.355,7.91 8.254,8.207 8.093,8.344 7.912,8.529 7.585,8.622 7.108,8.622 M1.466,7.202C2.066,7.06,2.635,6.902,3.173,6.728L3.173,5.355 1.466,5.355z M1.466,4.613L3.173,4.613 3.173,3.193 1.466,3.193z M1.466,2.451L3.173,2.451 3.173,1.123 1.466,1.123z M4.018,0.371L4.018,6.45C4.167,6.408,4.296,6.363,4.408,6.321L4.408,7.146C3.208,7.591,1.821,7.994,0.25,8.352L0,7.535C0.21,7.499,0.411,7.459,0.603,7.416L0.603,0.371z" Fill="#FF3F75B5" Margin="26.671,5.612,38.872,16.615"/>
                                <Path Data="F1M5.902,7.007L7.573,7.007 7.573,1.987 5.902,1.987z M8.455,1.142L8.455,8.547 7.573,8.547 7.573,7.862 5.902,7.862 5.902,8.586 5.003,8.586 5.003,1.142z M2.905,8.547C2.689,8.547,2.441,8.54,2.164,8.52L2.005,7.538C2.302,7.586 2.605,7.61 2.915,7.61 3.235,7.61 3.422,7.424 3.471,7.055 3.533,6.572 3.57,5.019 3.583,2.396L2.468,2.396C2.437,3.627 2.32,4.663 2.115,5.505 1.875,6.537 1.423,7.589 0.762,8.661L0,7.981C0.594,7.133 1.018,6.213 1.273,5.216 1.451,4.567 1.556,3.627 1.588,2.396L0.177,2.396 0.177,1.55 1.597,1.55 1.597,0 2.479,0 2.479,1.55 4.501,1.55C4.501,4.805 4.465,6.736 4.389,7.341 4.328,7.813 4.211,8.121 4.038,8.27 3.826,8.456 3.449,8.547 2.905,8.547" Fill="#FF3F75B5" Margin="0,16.161,65.598,6.092"/>
                                <Path Data="F1M5.838,7.305L7.239,7.305 7.239,5.085 5.838,5.085z M5.838,4.27L7.239,4.27 7.239,2.301 5.838,2.301z M3.565,7.305L4.947,7.305 4.947,5.085 3.565,5.085z M3.565,4.27L4.947,4.27 4.947,2.301 3.565,2.301z M8.139,1.486L8.139,8.751 7.24,8.751 7.24,8.119 3.565,8.119 3.565,8.751 2.683,8.751 2.683,1.486 4.947,1.486 4.947,0 5.838,0 5.838,1.486z M0.956,0.177C1.52,0.48,2.031,0.835,2.489,1.243L1.932,2.107C1.449,1.606,0.953,1.206,0.446,0.909z M1.552,4.781L2.275,5.308C1.823,6.602,1.315,7.729,0.752,8.688L0.075,7.945C0.546,7.202,1.037,6.148,1.552,4.781 M0.474,2.441C1.062,2.72,1.584,3.054,2.041,3.444L1.513,4.27C1.019,3.805,0.514,3.435,0,3.155z" Fill="#FF3F75B5" Margin="9.642,16.134,56.272,6.029"/>
                                <TextBlock Foreground="Black" Text="{Binding selftype, Converter={StaticResource selftypeConverter}}" Margin="39.589,0,0,0" FontSize="21.333"/>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </DataTemplate>
        </Grid.Resources>
        <CommandBar DefaultLabelPosition="Right">
            <AppBarButton Label="更新加油站資料庫" x:Name="refreshstabutton" Tapped="refreshstabutton_Tapped">
                <AppBarButton.Icon>
                    <fa:FontAwesome Icon="Refresh"/>
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton Label="設定搜尋區域" x:Name="positionbutton" Click="positionbutton_Click" AllowFocusOnInteraction="True">
                <AppBarButton.Icon>
                    <fa:FontAwesome Icon="LocationArrow"/>
                </AppBarButton.Icon>
                <FlyoutBase.AttachedFlyout>
                    <Flyout>
                        <StackPanel Margin="10,10" Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <RadioButton Content="按照距離搜尋" GroupName="searchmethods" Tag="Green" IsChecked="{Binding sfilterangeEnable, Mode=TwoWay}"/>
                                <RadioButton Content="搜尋特定縣市" GroupName="searchmethods" Tag="Yellow" IsChecked="{Binding sfiltercountryEnable, Mode=TwoWay}"/>
                            </StackPanel>
                            <ComboBox x:Name="countryCombo" Width="300" Header="請選擇一個縣市" Visibility="{Binding sfiltercountryEnable, ConverterParameter=1, Converter={StaticResource boolvisConverter}}" ItemsSource="{Binding countryitems}" SelectedIndex="{Binding sfiltercountry, Mode=TwoWay}"/>
                            <StackPanel Margin="12,10,0,10" Orientation="Vertical" Visibility="{Binding sfiltercountryEnable, ConverterParameter=0, Converter={StaticResource boolvisConverter}}">
                                <StackPanel Margin="12,10,0,10" Orientation="Horizontal">
                                    <RadioButton Content="按照GPS位置搜尋" GroupName="positionmethods" Tag="Green" IsChecked="{Binding sfiltergpsLocation, Mode=TwoWay}"/>
                                    <RadioButton Content="設定地點" GroupName="positionmethods" Tag="Yellow" IsChecked="{Binding sfiltercustomLocation, Mode=TwoWay}"/>
                                </StackPanel>
                                <Grid Visibility="{Binding sfiltercustomLocation, ConverterParameter=1, Converter={StaticResource boolvisConverter}}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <StackPanel Orientation="Horizontal" Margin="3">
                                        <TextBox x:Name="customlocation" Width="300" PlaceholderText="請輸入地址或地標" Text="{Binding sfilterlocationname}"/>
                                        <Button x:Name="customPosBtn" Content="搜尋" Tapped="customPosBtn_Tapped"/>
                                        <ProgressRing Height="30" Width="30"/>
                                    </StackPanel>
                                    <Maps:MapControl Center="{Binding sfilterlocation, Mode=TwoWay, UpdateSourceTrigger=Explicit, Converter={StaticResource geoPointConverter}}" x:Name="positionmap" Height="100" ZoomInteractionMode="GestureAndControl" TiltInteractionMode="GestureAndControl" MapServiceToken="uJx4zNkaPyqzOvj3rQzg~pWGYRvM_W3IjTIPciKnKLg~AhC_MVZM__kLFnmAxIFr0GXa1VRaG8NAsK0mTiUnOmQRip_0tg9MKCb3gNKzsP_l" Grid.Row="2" ZoomLevel="15">
                                        <Maps:MapItemsControl ItemsSource="{Binding infoPoints}">
                                            <Maps:MapItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Maps:MapControl.Location="{Binding Converter={StaticResource geoPointConverter}}">
                                                        <StackPanel Orientation="Horizontal" Visibility="{Binding ConverterParameter=1, Converter={StaticResource infopointVisConverter}}">
                                                            <fa:FontAwesome Icon="MapMarker" Foreground="Maroon"></fa:FontAwesome>
                                                            <TextBlock Text="目前位置" Foreground="Maroon"></TextBlock>
                                                        </StackPanel>
                                                        <StackPanel Orientation="Horizontal" Visibility="{Binding ConverterParameter=0, Converter={StaticResource infopointVisConverter}}">
                                                            <fa:FontAwesome Icon="ThumbTack" Foreground="Maroon"></fa:FontAwesome>
                                                            <TextBlock Text="查詢位置" Foreground="Maroon"></TextBlock>
                                                        </StackPanel>
                                                    </Grid>
                                                </DataTemplate>
                                            </Maps:MapItemsControl.ItemTemplate>
                                        </Maps:MapItemsControl>
                                    </Maps:MapControl>
                                </Grid>
                            </StackPanel>
                            <Slider x:Name="searchdistance" Header="搜尋範圍" Minimum="1" Maximum="15" TickFrequency="1" Value="{Binding sfilterKilonmeter, Mode=TwoWay}"/>
                        </StackPanel>
                    </Flyout>
                </FlyoutBase.AttachedFlyout>
            </AppBarButton>
            <AppBarButton Label="設定過濾條件">
                <AppBarButton.Icon>
                    <fa:FontAwesome Icon="Filter"/>
                </AppBarButton.Icon>
                <AppBarButton.Flyout>
                    <MenuFlyout>
                        <MenuFlyoutSubItem Text="加油站過濾">
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="avaiablehours" Content="僅顯示營業中的加油站" IsChecked="{Binding sfilterInservice, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="cpconly" Content="不顯示台塑加油站" IsChecked="{Binding sfilterFPCC, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="fpcconly" Content="不顯示中油加油站" IsChecked="{Binding sfilterCPC, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="directonly" Content="僅顯示直營加油站" IsChecked="{Binding sfilterDirect, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="avaiablehours" Content="僅顯示提供自助加油的加油站" IsChecked="{Binding sfilterSelf, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="savedstation" Content="將儲存的加油站另外分類" IsChecked="{Binding sfilterFavoirte, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                        </MenuFlyoutSubItem>
                        <MenuFlyoutSubItem Text="油品過濾">
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="_92only" Content="92無鉛汽油" IsChecked="{Binding sfilterp92, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="_95only" Content="95無鉛汽油" IsChecked="{Binding sfilterp95, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="_98only" Content="98無鉛汽油" IsChecked="{Binding sfilterp98, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="dieselonly" Content="柴油" IsChecked="{Binding sfilterpdiesel, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                            <MenuFlyoutItem>
                                <MenuFlyoutItem.Template>
                                    <ControlTemplate TargetType="MenuFlyoutItem">
                                        <CheckBox x:Name="alcoholonly" Content="酒精汽油" IsChecked="{Binding sfilterpgasohol, Mode=TwoWay}"/>
                                    </ControlTemplate>
                                </MenuFlyoutItem.Template>
                            </MenuFlyoutItem>
                        </MenuFlyoutSubItem>
                    </MenuFlyout>
                </AppBarButton.Flyout>
            </AppBarButton>
            <AppBarButton x:Name="searchBtn" Label="搜尋" Tapped="searchBtn_Tapped">
                <AppBarButton.Icon>
                    <fa:FontAwesome Icon="Search"/>
                </AppBarButton.Icon>
            </AppBarButton>
        </CommandBar>
        <Grid Margin="12,50,12,0" x:Name="progressArea" Visibility="{Binding progressVis, ConverterParameter=1, Converter={StaticResource boolvisConverter}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>
            <ProgressBar x:Name="progressVal" Foreground="Green" Value="{Binding progressVal}"/>
            <TextBlock x:Name="progressMsg" Text="{Binding progressMsg}" Grid.Column="1"/>
        </Grid>
        <Maps:MapControl Center="{Binding centerloc, Mode=TwoWay, UpdateSourceTrigger=Explicit, Converter={StaticResource geoPointConverter}}" ZoomLevel="15" x:Name="stationmap" Margin="12,5,12,0" Height="250" ZoomInteractionMode="GestureAndControl" TiltInteractionMode="GestureAndControl" MapServiceToken="uJx4zNkaPyqzOvj3rQzg~pWGYRvM_W3IjTIPciKnKLg~AhC_MVZM__kLFnmAxIFr0GXa1VRaG8NAsK0mTiUnOmQRip_0tg9MKCb3gNKzsP_l" Grid.Row="1" Loaded="stationmap_Loaded">
            <Maps:MapItemsControl ItemsSource="{Binding mapStations}">
                <Maps:MapItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid Maps:MapControl.Location="{Binding coordinance, Converter={StaticResource geoPointConverter}}">
                            <Grid Visibility="{Binding regular, ConverterParameter=1, Converter={StaticResource boolvisConverter}}">
                                <Grid Height="40.69" Width="30" Visibility="{Binding brand, ConverterParameter=1, Converter={StaticResource brandvisconvert}}">
                                    <Path Data="F1M12.344,0L6.172,10.69 0,0z" Fill="#FF1B828B" Margin="9.129,30,8.527,0"/>
                                    <Grid Margin="0,0,0,10.69">
                                        <Grid.Clip>
                                            <RectangleGeometry Rect="0, 0, 30, 30"/>
                                        </Grid.Clip>
                                        <Path Data="F1M30,30L0,30 0,0 30,0z" Fill="#FF1B828B"/>
                                        <Grid Margin="6.853,-5.833,-8.536,4.169">
                                            <Path Data="M0.315,10.846C0.519,10.937 0.678,10.861 0.845,10.811 1.992,10.475 3.173,10.227 4.275,9.783 5.287,9.375 5.933,9.563 6.608,10.406 7.171,11.112 7.943,11.655 8.571,12.225 8.746,11.179 8.959,9.989 9.132,8.791 9.188,8.426 9.323,8.249 9.693,8.144 10.981,7.777 12.256,7.364 13.633,6.938 12.442,6.378 11.362,5.839 10.254,5.361 9.836,5.181 9.766,4.953 9.836,4.55 9.985,3.699 10.092,2.841 10.235,1.847 9.436,2.582 8.73,3.215 8.045,3.871 7.824,4.084 7.648,4.109 7.368,3.976 5.673,3.181 3.969,2.402 2.266,1.624 2.148,1.569 2.037,1.44 1.837,1.553 3.084,3.021 4.32,4.478 5.644,6.039L2.465,6.039C2.877,6.479 3.209,6.856 3.564,7.208 3.825,7.464 3.891,7.621 3.551,7.912 2.455,8.86 1.399,9.856 0.315,10.846 M13.711,13.707C9.265,13.707 4.819,13.703 0.371,13.715 0.068,13.715 0,13.647 0,13.344 0.011,8.895 0.007,4.45 0.007,0.002 4.578,0.005 9.146,0.007 13.714,0.009L13.714,0C13.727,0.144 13.753,0.288 13.753,0.432 13.754,4.73 13.754,9.028 13.753,13.325 13.753,13.453 13.726,13.579 13.711,13.707" Fill="#FF1E81A1" Margin="0.001,13.707,6.432,0"/>
                                            <Path Data="M7.264,12.182C7.585,12.16 7.911,12.162 8.229,12.108 10.589,11.708 12.085,10.277 12.952,8.112 13.024,7.934 13.223,7.681 12.993,7.549 12.755,7.412 12.618,7.709 12.464,7.86 12.43,7.894 12.407,7.938 12.374,7.975 11.552,8.9 10.619,9.66 9.353,9.865 8.328,10.028 7.317,9.966 6.371,9.493 4.063,8.336 4.518,5.308 5.953,4.217 6.782,3.587 8.189,3.55 9.003,4.16 9.543,4.564 9.773,5.329 9.536,5.936 9.251,6.664 8.714,6.99 7.94,6.911 7.67,6.883 7.451,6.754 7.235,6.61 7.125,6.538 7.002,6.434 6.885,6.532 6.753,6.64 6.811,6.798 6.877,6.932 6.993,7.167 7.134,7.376 7.354,7.532 8.022,8.005 8.77,8.095 9.531,7.907 10.674,7.624 11.307,6.806 11.527,5.696 11.762,4.506 11.482,3.433 10.505,2.64 9.342,1.694 7.983,1.5 6.53,1.648 3.985,1.908 1.922,4.111 1.865,6.669 1.793,9.883 4.033,12.164 7.264,12.182 M13.715,13.716C9.147,13.714 4.578,13.712 0.008,13.709 0.008,9.264 0.012,4.818 0,0.37 0,0.069 0.069,-0.001 0.371,0 4.82,0.011 9.266,0.007 13.711,0.007 13.727,0.133 13.755,0.261 13.755,0.387 13.757,4.703 13.757,9.018 13.755,13.333 13.755,13.461 13.729,13.588 13.715,13.716" Fill="#FF6BF3CE" Margin="0,0,6.43,13.706"/>
                                            <Path Data="M6.919,11.297C9.415,11.307 11.435,9.295 11.421,6.813 11.407,4.379 9.433,2.371 7.035,2.355 4.494,2.338 2.486,4.281 2.477,6.769 2.469,9.301 4.416,11.288 6.919,11.297 M0.004,13.715C0.018,13.588 0.044,13.461 0.044,13.333 0.046,9.018 0.046,4.702 0.044,0.386 0.044,0.26 0.016,0.133 0,0.007 4.48,0.007 8.958,0.011 13.438,0 13.74,-0.001 13.81,0.067 13.809,0.37 13.798,4.818 13.801,9.263 13.801,13.709 10.869,13.715 7.939,13.724 5.007,13.724 3.34,13.725 1.671,13.712 0.004,13.707z" Fill="#FF144435" Margin="13.711,0,0,13.698" Grid.ColumnSpan="2"/>
                                            <Path Data="M5.397,4.783C5.224,3.784 5.104,2.856 4.872,1.947 4.82,1.744 4.787,1.517 4.53,1.466 4.28,1.415 4.155,1.613 4.012,1.763 3.956,1.821 3.903,1.884 3.858,1.951 2.658,3.722 1.935,5.639 2.026,7.817 2.149,10.737 5.158,12.716 7.866,11.627 9.493,10.973 10.546,9.694 11.428,8.248 11.854,7.556 12.18,6.817 12.398,6.032 12.456,5.828 12.516,5.606 12.348,5.435 12.172,5.257 11.958,5.349 11.758,5.428 11.64,5.477 11.518,5.519 11.398,5.568 10.638,5.879 9.878,6.19 9.13,6.495 9.028,6.383 9.058,6.282 9.068,6.191 9.17,5.112 9.252,4.032 9.237,2.948 9.232,2.687 9.372,2.343 9.068,2.193 8.746,2.033 8.536,2.348 8.315,2.515 7.356,3.25 6.405,3.997 5.397,4.783 M0.002,0C1.67,0.005 3.338,0.018 5.006,0.017 7.938,0.017 10.868,0.009 13.8,0.002 13.8,4.45 13.796,8.895 13.808,13.344 13.808,13.647 13.74,13.715 13.436,13.715 8.957,13.703 4.478,13.707 -0.001,13.707 0.014,13.579 0.042,13.453 0.042,13.325 0.043,9.028 0.043,4.73 0.042,0.432 0.042,0.288 0.015,0.144 0.002,0" Fill="#FF327E87" Margin="13.712,13.707,0,0" Grid.ColumnSpan="2"/>
                                            <Path Data="M0,9.338C1.084,8.348 2.14,7.352 3.236,6.404 3.576,6.113 3.51,5.956 3.249,5.7 2.894,5.348 2.562,4.971 2.15,4.531L5.329,4.531C4.005,2.97 2.769,1.513 1.522,0.045 1.722,-0.068 1.833,0.061 1.951,0.116 3.654,0.894 5.358,1.673 7.053,2.468 7.333,2.601 7.509,2.576 7.73,2.363 8.415,1.707 9.121,1.074 9.92,0.339 9.777,1.333 9.67,2.191 9.521,3.042 9.451,3.445 9.521,3.673 9.939,3.853 11.047,4.331 12.127,4.87 13.318,5.43 11.941,5.856 10.666,6.269 9.378,6.636 9.008,6.741 8.873,6.918 8.817,7.283 8.644,8.481 8.431,9.671 8.256,10.717 7.628,10.147 6.856,9.604 6.293,8.898 5.618,8.055 4.972,7.867 3.96,8.275 2.858,8.719 1.677,8.967 0.53,9.303 0.363,9.353 0.204,9.429 0,9.338" Fill="#FF6BF3CE" Margin="0.316,15.215,6.553,1.49"/>
                                            <Path Data="M5.401,10.579C2.17,10.561 -0.07,8.28 0.002,5.066 0.059,2.508 2.122,0.305 4.667,0.045 6.12,-0.103 7.479,0.091 8.642,1.037 9.619,1.83 9.899,2.903 9.664,4.093 9.444,5.203 8.811,6.021 7.668,6.304 6.907,6.492 6.159,6.402 5.491,5.929 5.271,5.773 5.13,5.564 5.014,5.329 4.948,5.195 4.89,5.037 5.022,4.929 5.139,4.831 5.262,4.935 5.372,5.007 5.588,5.151 5.807,5.28 6.077,5.308 6.851,5.387 7.388,5.061 7.673,4.333 7.91,3.726 7.68,2.961 7.14,2.557 6.326,1.947 4.919,1.984 4.09,2.614 2.655,3.705 2.2,6.733 4.508,7.89 5.454,8.363 6.465,8.425 7.49,8.262 8.756,8.057 9.689,7.297 10.511,6.372 10.544,6.335 10.567,6.291 10.601,6.257 10.755,6.106 10.892,5.809 11.13,5.946 11.36,6.078 11.161,6.331 11.089,6.509 10.222,8.674 8.726,10.105 6.366,10.505 6.048,10.559 5.722,10.557 5.401,10.579" Fill="#FF327E87" Margin="1.863,1.603,7.087,15.24"/>
                                            <Path Data="M7.937,4.506C7.942,2.528 6.404,0.964 4.46,0.974 2.53,0.982 0.987,2.532 0.981,4.464 0.976,6.408 2.508,7.952 4.444,7.954 6.406,7.956 7.934,6.448 7.937,4.506 M4.443,8.942C1.94,8.934 -0.007,6.946 0,4.416 0.01,1.926 2.018,-0.016 4.559,0 6.957,0.017 8.931,2.025 8.945,4.458 8.958,6.942 6.939,8.952 4.443,8.942" Fill="#FFF9FAFB" Margin="16.187,2.354,2.388,16.126" Grid.ColumnSpan="2"/>
                                            <Path Data="M3.378,3.325C4.386,2.539 5.337,1.792 6.296,1.057 6.517,0.89 6.727,0.575 7.049,0.735 7.354,0.885 7.213,1.229 7.218,1.49 7.233,2.574 7.15,3.654 7.048,4.733 7.039,4.824 7.008,4.925 7.111,5.037 7.858,4.732 8.618,4.421 9.379,4.11 9.498,4.061 9.62,4.019 9.739,3.97 9.939,3.891 10.152,3.799 10.33,3.977 10.498,4.148 10.436,4.37 10.378,4.574 10.16,5.359 9.834,6.098 9.409,6.79 8.526,8.236 7.474,9.515 5.848,10.169 3.138,11.258 0.13,9.279 0.007,6.359 -0.084,4.181 0.638,2.264 1.839,0.493 1.884,0.426 1.936,0.363 1.992,0.305 2.136,0.155 2.26,-0.043 2.511,0.008 2.768,0.059 2.801,0.286 2.853,0.489 3.085,1.398 3.205,2.326 3.378,3.325" Fill="#FF6BF3CE" Margin="15.731,15.165,1.35,1.785" Grid.ColumnSpan="2"/>
                                            <Path Data="M6.956,3.532C6.953,5.476 5.425,6.984 3.463,6.98 1.527,6.98 -0.005,5.436 0,3.49 0.006,1.56 1.549,0.01 3.479,0 5.423,-0.009 6.961,1.554 6.956,3.532" Fill="#FF027DC4" Margin="17.168,3.327,3.396,17.115" Grid.ColumnSpan="2"/>
                                        </Grid>
                                    </Grid>
                                </Grid>
                                <Grid Height="40.69" Width="30" Visibility="{Binding brand, ConverterParameter=0, Converter={StaticResource brandvisconvert}}">
                                    <Path Data="F1M12.343,0L6.171,10.69 0,0z" Fill="#FF134E8B" Margin="9.13,30,8.527,0"/>
                                    <Grid Margin="0,0,0,10.69">
                                        <Grid.Clip>
                                            <RectangleGeometry Rect="0, 0, 30, 30"/>
                                        </Grid.Clip>
                                        <Path Data="F1M30,30L0,30 0,0 30,0z" Fill="#FF134E8B"/>
                                        <Grid Margin="6.853,-5.833,-8.536,4.169">
                                            <Path Data="F1M31.683,15.847C31.683,7.1 24.59,0 15.845,0 7.094,0 0,7.1 0,15.847 0,23.734 5.764,30.275 13.309,31.487L13.309,30.641C6.233,29.439 0.839,23.273 0.839,15.847 0.839,7.555 7.555,0.838 15.845,0.838 24.129,0.838 30.853,7.555 30.853,15.847 30.853,23.388 25.29,29.629 18.043,30.695L18.043,31.536C25.751,30.464,31.683,23.848,31.683,15.847" Fill="#FF496ED2" Margin="0,0,0,0.128"/>
                                            <Path Data="F1M28.101,14.05C28.101,6.293 21.815,0 14.054,0 6.293,0 0,6.293 0,14.05 0,20.951 4.979,26.689 11.534,27.876L11.534,26.9C5.509,25.727 0.96,20.42 0.96,14.05 0.96,6.816 6.824,0.961 14.054,0.961 21.285,0.961 27.148,6.816 27.148,14.05 27.148,20.519 22.454,25.891 16.289,26.952L16.289,27.923C22.984,26.853,28.101,21.05,28.101,14.05" Fill="#FF496ED2" Margin="1.737,1.782,1.845,1.959"/>
                                            <Path Data="F1M24.268,12.136C24.268,5.432 18.835,0 12.134,0 5.434,0 0,5.432 0,12.136 0,17.975 4.12,22.85 9.614,24.009L9.614,23.029C4.658,21.888 0.954,17.444 0.954,12.136 0.954,5.963 5.965,0.961 12.134,0.961 18.305,0.961 23.307,5.963 23.307,12.136 23.307,17.543 19.473,22.054 14.37,23.089L14.37,24.065C20.004,23.015,24.268,18.074,24.268,12.136" Fill="#FF496ED2" Margin="3.657,3.696,3.758,3.903"/>
                                            <Path Data="F1M8.36,2.196C8.36,2.196,6.87,1.398,4.81,1.332L4.81,0.866C5.894,0.894 7.124,1.114 8.444,1.689 8.598,1.755 8.36,2.196 8.36,2.196 M0.73,2.31L0.53,1.83C0.53,1.83,2.006,0.937,4.28,0.866L4.28,1.332C3.18,1.368,1.96,1.626,0.73,2.31 M4.81,0.464L4.81,0 4.28,0 4.28,0.476C1.766,0.598 0.001,1.717 0.001,1.717 0.001,1.717 0.546,2.869 0.73,2.788 2.282,2.112 3.312,1.77 4.28,1.702L4.28,2.478 4.81,2.478 4.81,1.693C5.832,1.727 6.878,2.06 8.498,2.619 8.668,2.675 8.952,1.548 8.952,1.548 7.492,0.759 6.078,0.477 4.81,0.464" Fill="#FF496ED2" Margin="11.12,16.481,11.612,12.391"/>
                                            <Path Data="F1M5.744,0C5.744,0 4.162,1.636 4.331,3.096 4.385,3.542 4.392,4.671 3.885,5.125 3.701,5.286 2.77,3.665 1.466,3.827 1.466,4.111 3.04,4.841 1.35,6.533 1.019,6.806 -1.978,10.984 2.195,11.434 2.441,11.461 -0.457,10.138 2.418,7.435 2.587,7.275 2.533,10.425 5.291,10.425 5.968,10.425 7.765,9.519 7.526,7.604 7.828,7.379 11.039,9.688 8.165,11.322 8.165,11.322 9.117,11.546 10.024,10.758 11.048,9.859 11.723,8.181 9.064,5.917 9.064,5.917 9.518,4.902 9.117,4.165 8.964,3.88 9.011,2.927 9.117,2.651 9.234,2.366 8.557,3.265 8.611,3.827 8.673,4.395 7.828,5.071 7.526,4.956 7.305,4.872 8.165,4.395 6.137,2.313 5.783,1.944 5.26,0.953 5.744,0" Fill="#FFF22E97" Margin="10.5,5.694,10.255,14.536"/>
                                            <Path Data="F1M0.241,0C0.241,0 0.326,1.662 1.54,2.394 1.617,2.44 -0.743,2 0.241,0" Fill="#FFF22E97" Margin="12.477,14.171,17.665,15.096"/>
                                            <Path Data="F1M1.475,0C1.621,0.099 2.16,2.126 0.008,2.394 -0.116,2.41 1.252,1.93 1.475,0" Fill="#FFF22E97" Margin="17.182,14.213,12.859,15.057"/>
                                            <Path Data="F1M0.86,0C0.86,0 1.106,1.898 1.182,2.084 1.298,2.348 0.361,1.578 0,0.282 0.114,0.151 0.86,0 0.86,0" Fill="#FF496ED2" Margin="12.411,19.212,18.079,10.316"/>
                                            <Path Data="F1M0,0.094L0.768,0 0.807,2.534C0.807,2.534 1.221,2.722 1.858,2.756 1.912,2.759 1.82,8.053 1.82,8.053L1.505,8.035 1.367,3.117C1.367,3.117 0.414,2.985 0.169,2.704 0.084,2.609 0,0.094 0,0.094" Fill="#FF496ED2" Margin="13.933,18.949,15.875,4.662"/>
                                            <Path Data="F1M1.729,1.647C1.544,1.554,1.344,1.483,1.16,1.428L1.199,0.866C1.422,0.916 1.667,0.987 1.944,1.091 1.944,1.091 1.952,1.325 1.729,1.647 M1.091,2.242L1.137,1.71C1.307,1.768 1.453,1.829 1.544,1.87 1.429,1.99 1.284,2.116 1.091,2.242 M0.338,1.567C0.5,1.569 0.662,1.59 0.807,1.621 0.784,1.93 0.746,2.245 0.683,2.483 0.591,2.531 0.492,2.578 0.384,2.626 0.353,2.639 0.338,2.079 0.338,1.567 M0.338,0.754C0.338,0.754 0.53,0.75 0.845,0.798 0.845,0.944 0.838,1.136 0.823,1.342 0.623,1.298 0.446,1.273 0.338,1.26z M1.237,0.553L1.245,0.054C1.245,0.054 0.914,0 0.875,0 0.883,0.078 0.868,0.274 0.861,0.43 0.63,0.408 0.062,0.345 0,0.345 0.039,0.608 0.008,3.057 0.008,3.057 0.008,3.057 2.037,2.607 2.52,0.918 2.543,0.842 1.237,0.553 1.237,0.553" Fill="#FF496ED2" Margin="16.199,18.895,12.964,9.712"/>
                                            <Path Data="F1M0,0L0.438,0 0.438,1.915 0,1.915z" Fill="#FF496ED2" Margin="15.184,19.269,16.061,10.48"/>
                                            <Path Data="F1M1.682,1.636L3.622,1.636C3.219,1.483 2.808,1.359 2.391,1.259 2.208,1.408 1.972,1.534 1.682,1.636 M3.304,2.971L0.943,2.971 0.943,3.237 3.304,3.237z M0.943,2.689L3.304,2.689 3.304,2.457 0.943,2.457z M0.943,2.164L3.304,2.164 3.304,1.94 0.943,1.94z M0.395,0.103C0.661,0.202,0.907,0.319,1.129,0.457L0.879,0.837C0.653,0.667,0.419,0.531,0.181,0.425z M1.992,0L2.363,0.143C2.312,0.221,2.266,0.293,2.224,0.358L4.017,0.358 4.017,0.658C3.856,0.837,3.662,0.994,3.435,1.128L3.152,0.874C3.247,0.827,3.356,0.763,3.475,0.676L2.869,0.676C2.795,0.796 2.726,0.9 2.664,0.99 3.178,1.114 3.651,1.251 4.084,1.403L3.87,1.739C3.822,1.719,3.771,1.698,3.718,1.681L3.718,3.536 2.789,3.536C3.228,3.617,3.685,3.733,4.161,3.886L4.008,4.263C3.545,4.09,3.062,3.955,2.561,3.863L2.726,3.536 1.521,3.536 1.753,3.814C1.27,4.008,0.787,4.152,0.305,4.245L0.127,3.867C0.646,3.798,1.101,3.688,1.49,3.536L0.53,3.536 0.53,1.636 1.386,1.636 1.198,1.389C1.598,1.291 1.908,1.157 2.126,0.986 2.231,0.902 2.324,0.8 2.409,0.676L1.934,0.676C1.807,0.796,1.62,0.928,1.369,1.07L1.054,0.793C1.299,0.67 1.495,0.55 1.642,0.43 1.782,0.311 1.9,0.167 1.992,0 M1,0.914L1.113,1.295C0.862,1.437,0.547,1.56,0.172,1.667L0,1.264C0.329,1.192,0.662,1.075,1,0.914" Fill="#FFF22E97" Margin="13.542,27.401,13.98,0"/>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>
                            <Grid Visibility="{Binding regular, ConverterParameter=0, Converter={StaticResource boolvisConverter}}">
                                <Grid Height="15.999" Width="16" Visibility="{Binding current, ConverterParameter=1, Converter={StaticResource boolvisConverter}}">
                                    <Path Data="F1M16,8C16,12.417 12.419,15.999 8,15.999 3.581,15.999 0,12.417 0,8 0,3.583 3.581,0 8,0 12.419,0 16,3.583 16,8" Fill="#FFFF9999"/>
                                    <Path Data="F1M9.999,5C9.999,7.761 7.761,10 4.999,10 2.238,10 0,7.761 0,5 0,2.238 2.238,0 4.999,0 7.761,0 9.999,2.238 9.999,5" Fill="#FFBF0000" Margin="3,2.999,3.001,3"/>
                                </Grid>
                                <Grid Height="40.69" Width="30" Visibility="{Binding favorite, ConverterParameter=1, Converter={StaticResource boolvisConverter}}">
                                    <Path Data="F1M12.343,0L6.171,10.69 0,0z" Fill="#FFFFD517" Margin="9.13,30,8.527,0"/>
                                    <Grid Margin="0,0,0,10.69">
                                        <Grid.Clip>
                                            <RectangleGeometry Rect="0, 0, 30, 30"/>
                                        </Grid.Clip>
                                        <Path Data="F1M30,30L0,30 0,0 30,0z" Fill="#FFFFD517"/>
                                        <Path Data="F1M13.52,11.991L19.948,0 25.555,12.395 38.943,14.803 28.889,23.966 30.736,37.443 18.915,30.712 6.668,36.634 9.416,23.31 0,13.493z" Fill="#FFFFB300" Margin="2.5,-9.943,-11.443,2.5"/>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </Maps:MapItemsControl.ItemTemplate>
            </Maps:MapItemsControl>
        </Maps:MapControl>
        <StackPanel Visibility="{Binding foundcount, ConverterParameter=1, Converter={StaticResource countvisConverter}}" Grid.Row="2" Margin="12,3,12,0" Orientation="Horizontal">
            <TextBlock Text="{Binding foundcount, Converter={StaticResource foundcountCounter}}"/>
            <TextBlock Text="，"/>
            <TextBlock Text="{Binding stationDBcount, Converter={StaticResource DBcountConverter}}"/>
        </StackPanel>
        <SemanticZoom Margin="12,3,12,0" Grid.Row="3">
            <SemanticZoom.ZoomedInView>
                <ListView
                ItemsSource="{Binding Source={StaticResource stationcollectview}}"
                ItemTemplate="{StaticResource stationItem}">
                    <ListView.GroupStyle>
                        <GroupStyle
                        HeaderTemplate="{StaticResource stationHeader}"
                        HidesIfEmpty="True"/>
                    </ListView.GroupStyle>
                </ListView>
            </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                <ListView
                ItemsSource="{Binding CollectionGroups, Source={StaticResource stationcollectview}}"
                ItemTemplate="{StaticResource stationoutHeader}"/>
            </SemanticZoom.ZoomedOutView>
        </SemanticZoom>
    </Grid>
</Page>
